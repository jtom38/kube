---

apiVersion: apps/v1
kind: Deployment
metadata:
  name: nextcloud-deployment
  labels:
    app: nextcloud

spec:
  replicas: 1  
  
  selector: 
    matchLabels:
      app: nextcloud

  template:
    metadata:
      labels:
        app: nextcloud
    
    spec:
      containers:
        - name: nextcloud
          image: nextcloud:20.0.2-apache
          #env:
          #  - name:
          ports:
            - containerPort: 80
          volumeMounts:
            - name: nextcloud-storage
              mountPath: /var/www/html
        
              #- name: nextcloud-sql
          

      volumes:
        - name: nextcloud-storage
          persistentVolumeClaim:
            claimName: nextcloud-nfs-pvc

